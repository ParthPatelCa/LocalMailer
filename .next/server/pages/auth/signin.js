(()=>{var e={};e.id=65,e.ids=[65,888,660],e.modules={1323:(e,t)=>{"use strict";Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},1015:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>x,default:()=>p,getServerSideProps:()=>g,getStaticPaths:()=>h,getStaticProps:()=>m,reportWebVitals:()=>f,routeModule:()=>j,unstable_getServerProps:()=>b,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>P,unstable_getStaticProps:()=>v});var i=r(7093),a=r(5244),n=r(1323),o=r(5388),l=r.n(o),c=r(1940),u=r(1134),d=e([c]);c=(d.then?(await d)():d)[0];let p=(0,n.l)(u,"default"),m=(0,n.l)(u,"getStaticProps"),h=(0,n.l)(u,"getStaticPaths"),g=(0,n.l)(u,"getServerSideProps"),x=(0,n.l)(u,"config"),f=(0,n.l)(u,"reportWebVitals"),v=(0,n.l)(u,"unstable_getStaticProps"),P=(0,n.l)(u,"unstable_getStaticPaths"),y=(0,n.l)(u,"unstable_getStaticParams"),b=(0,n.l)(u,"unstable_getServerProps"),S=(0,n.l)(u,"unstable_getServerSideProps"),j=new i.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/auth/signin",pathname:"/auth/signin",bundlePath:"",filename:""},components:{App:c.default,Document:l()},userland:u});s()}catch(e){s(e)}})},243:(e,t,r)=>{"use strict";r.d(t,{L:()=>l});let s=require("next-auth/providers/google");var i=r.n(s);let a=require("@next-auth/prisma-adapter"),n=require("@prisma/client"),o=globalThis.prisma??new n.PrismaClient({log:["error"]}),l={adapter:(0,a.PrismaAdapter)(o),providers:[i()({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET})],callbacks:{async session({session:e,user:t}){if(e?.user&&t){e.user.id=t.id;let r=await o.subscription.findUnique({where:{userId:t.id}});e.user.plan=r?.plan||"free",e.user.subscriptionStatus=r?.status||"inactive"}return e},async signIn({user:e,account:t,profile:r}){if(e.email&&t?.provider==="google")try{await o.emailSettings.upsert({where:{userId:e.id},create:{userId:e.id,fromName:e.name||"Your Business",fromEmail:e.email,replyTo:e.email},update:{}})}catch(e){console.error("Error creating email settings:",e)}return!0}},session:{strategy:"database"},pages:{signIn:"/auth/signin",error:"/auth/error"}}},1940:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>u});var i=r(997);r(6764);var a=r(1649),n=r(9752),o=r(6689),l=r(6201),c=e([n,l]);function u({Component:e,pageProps:{session:t,...r}}){let[s]=(0,o.useState)(()=>new n.QueryClient);return i.jsx(a.SessionProvider,{session:t,children:(0,i.jsxs)(n.QueryClientProvider,{client:s,children:[i.jsx(e,{...r}),i.jsx(l.Toaster,{position:"top-right"})]})})}[n,l]=c.then?(await c)():c,s()}catch(e){s(e)}})},1134:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,getServerSideProps:()=>c});var s=r(997),i=r(3227),a=r(1649),n=r(243),o=r(6271);function l({providers:e}){return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{children:[s.jsx("div",{className:"flex justify-center",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(o.Z,{className:"h-12 w-12 text-primary-600"}),s.jsx("span",{className:"text-2xl font-bold text-gray-900",children:"LocalMailer"})]})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Get started with email marketing for your local business"})]}),s.jsx("div",{className:"mt-8 space-y-4",children:Object.values(e).map(e=>s.jsx("div",{children:(0,s.jsxs)("button",{onClick:()=>(0,a.signIn)(e.id,{callbackUrl:"/dashboard"}),className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[(0,s.jsxs)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with ",e.name]})},e.name))})]})})}let c=async e=>await (0,i.getServerSession)(e.req,e.res,n.L)?{redirect:{destination:"/dashboard",permanent:!1}}:{props:{providers:await (0,a.getProviders)()??{}}}},6764:()=>{},5244:(e,t)=>{"use strict";var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},3227:e=>{"use strict";e.exports=require("next-auth")},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},9752:e=>{"use strict";e.exports=import("@tanstack/react-query")},6201:e=>{"use strict";e.exports=import("react-hot-toast")},1017:e=>{"use strict";e.exports=require("path")},8387:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(6689),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var n=(e,t)=>{let r=(0,s.forwardRef)(({color:r="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:c,...u},d)=>(0,s.createElement)("svg",{ref:d,...i,width:n,height:n,stroke:r,strokeWidth:l?24*Number(o)/Number(n):o,className:`lucide lucide-${a(e)}`,...u},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...(Array.isArray(c)?c:[c])||[]]));return r.displayName=`${e}`,r}},6271:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(8387).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[388],()=>r(1015));module.exports=s})();