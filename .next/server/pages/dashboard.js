(()=>{var e={};e.id=26,e.ids=[26,888,660],e.modules={7399:(e,s,a)=>{"use strict";a.a(e,async(e,t)=>{try{a.r(s),a.d(s,{config:()=>g,default:()=>x,getServerSideProps:()=>u,getStaticPaths:()=>p,getStaticProps:()=>h,reportWebVitals:()=>f,routeModule:()=>w,unstable_getServerProps:()=>b,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>v});var r=a(7093),i=a(5244),l=a(1323),n=a(5388),c=a.n(n),d=a(1940),m=a(6914),o=e([d]);d=(o.then?(await o)():o)[0];let x=(0,l.l)(m,"default"),h=(0,l.l)(m,"getStaticProps"),p=(0,l.l)(m,"getStaticPaths"),u=(0,l.l)(m,"getServerSideProps"),g=(0,l.l)(m,"config"),f=(0,l.l)(m,"reportWebVitals"),v=(0,l.l)(m,"unstable_getStaticProps"),j=(0,l.l)(m,"unstable_getStaticPaths"),y=(0,l.l)(m,"unstable_getStaticParams"),b=(0,l.l)(m,"unstable_getServerProps"),N=(0,l.l)(m,"unstable_getServerSideProps"),w=new r.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/dashboard",pathname:"/dashboard",bundlePath:"",filename:""},components:{App:d.default,Document:c()},userland:m});t()}catch(e){t(e)}})},3042:(e,s,a)=>{"use strict";a.d(s,{Z:()=>y});var t=a(997),r=a(6689),i=a(1649),l=a(1664),n=a.n(l),c=a(1163),d=a(5491),m=a(8936),o=a(802),x=a(6271),h=a(467),p=a(9832),u=a(7344),g=a(2656),f=a(9067),v=a(1203),j=a(1924);function y({children:e}){let{data:s}=(0,i.useSession)(),a=(0,c.useRouter)(),[l,y]=(0,r.useState)(!1),b=[{name:"Overview",href:"/dashboard",icon:d.Z},{name:"Contacts",href:"/dashboard/contacts",icon:m.Z},{name:"Campaigns",href:"/dashboard/campaigns",icon:o.Z},{name:"Templates",href:"/dashboard/templates",icon:x.Z},{name:"Analytics",href:"/dashboard/analytics",icon:h.Z},{name:"Settings",href:"/dashboard/settings",icon:p.Z}];return u.Z,g.Z,f.Z,(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsxs)("div",{className:`${l?"block":"hidden"} fixed inset-0 flex z-40 lg:hidden`,children:[t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>y(!1)}),(0,t.jsxs)("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white",children:[t.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:t.jsx("button",{className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>y(!1),children:t.jsx(v.Z,{className:"h-6 w-6 text-white"})})}),(0,t.jsxs)("div",{className:"flex-1 h-0 pt-5 pb-4 overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 flex items-center px-4",children:[t.jsx(x.Z,{className:"h-8 w-8 text-primary-600"}),t.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"LocalMailer"})]}),t.jsx("nav",{className:"mt-5 px-2 space-y-1",children:b.map(e=>{let s=e.icon,r=a.pathname===e.href;return(0,t.jsxs)(n(),{href:e.href,className:`${r?"sidebar-link active":"sidebar-link"}`,children:[t.jsx(s,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})]})]}),t.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col lg:fixed lg:inset-y-0",children:(0,t.jsxs)("div",{className:"flex-1 flex flex-col min-h-0 border-r border-gray-200 bg-white",children:[(0,t.jsxs)("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center flex-shrink-0 px-4",children:[t.jsx(x.Z,{className:"h-8 w-8 text-primary-600"}),t.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"LocalMailer"})]}),t.jsx("nav",{className:"mt-5 flex-1 px-2 space-y-1",children:b.map(e=>{let s=e.icon,r=a.pathname===e.href;return(0,t.jsxs)(n(),{href:e.href,className:`${r?"sidebar-link active":"sidebar-link"}`,children:[t.jsx(s,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]}),t.jsx("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:(0,t.jsxs)("div",{className:"flex items-center w-full",children:[t.jsx("div",{children:t.jsx("img",{className:"inline-block h-9 w-9 rounded-full",src:s?.user?.image||"/api/placeholder/36/36",alt:""})}),(0,t.jsxs)("div",{className:"ml-3 flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:s?.user?.name}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[s?.user?.plan||"Free"," Plan"]})]})]})})]})}),(0,t.jsxs)("div",{className:"lg:pl-64 flex flex-col flex-1",children:[t.jsx("div",{className:"sticky top-0 z-10 lg:hidden pl-1 pt-1 sm:pl-3 sm:pt-3 bg-gray-50",children:t.jsx("button",{className:"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500",onClick:()=>y(!0),children:t.jsx(j.Z,{className:"h-6 w-6"})})}),t.jsx("main",{className:"flex-1",children:t.jsx("div",{className:"py-6",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e})})})]})]})}},243:(e,s,a)=>{"use strict";a.d(s,{L:()=>c});let t=require("next-auth/providers/google");var r=a.n(t);let i=require("@next-auth/prisma-adapter"),l=require("@prisma/client"),n=globalThis.prisma??new l.PrismaClient({log:["error"]}),c={adapter:(0,i.PrismaAdapter)(n),providers:[r()({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET})],callbacks:{async session({session:e,user:s}){if(e?.user&&s){e.user.id=s.id;let a=await n.subscription.findUnique({where:{userId:s.id}});e.user.plan=a?.plan||"free",e.user.subscriptionStatus=a?.status||"inactive"}return e},async signIn({user:e,account:s,profile:a}){if(e.email&&s?.provider==="google")try{await n.emailSettings.upsert({where:{userId:e.id},create:{userId:e.id,fromName:e.name||"Your Business",fromEmail:e.email,replyTo:e.email},update:{}})}catch(e){console.error("Error creating email settings:",e)}return!0}},session:{strategy:"database"},pages:{signIn:"/auth/signin",error:"/auth/error"}}},1940:(e,s,a)=>{"use strict";a.a(e,async(e,t)=>{try{a.r(s),a.d(s,{default:()=>m});var r=a(997);a(6764);var i=a(1649),l=a(9752),n=a(6689),c=a(6201),d=e([l,c]);function m({Component:e,pageProps:{session:s,...a}}){let[t]=(0,n.useState)(()=>new l.QueryClient);return r.jsx(i.SessionProvider,{session:s,children:(0,r.jsxs)(l.QueryClientProvider,{client:t,children:[r.jsx(e,{...a}),r.jsx(c.Toaster,{position:"top-right"})]})})}[l,c]=d.then?(await d)():d,t()}catch(e){t(e)}})},6914:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v,getServerSideProps:()=>j});var t=a(997),r=a(3227),i=a(1649),l=a(243),n=a(3042),c=a(6689),d=a(8936),m=a(802),o=a(6271),x=a(467),h=a(8347);let p=(0,a(8387).Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var u=a(1664),g=a.n(u);function f(){let{data:e}=(0,i.useSession)(),[s,a]=(0,c.useState)({totalContacts:0,totalCampaigns:0,totalSent:0,openRate:0}),[r,l]=(0,c.useState)(!0);(0,c.useEffect)(()=>{n()},[]);let n=async()=>{try{let e=await fetch("/api/dashboard/stats");if(e.ok){let s=await e.json();a(s)}}catch(e){console.error("Error fetching stats:",e)}finally{l(!1)}};if(r)return(0,t.jsxs)("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),t.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-5",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),t.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]},s))})]});let u=[{name:"Total Contacts",value:s.totalContacts.toLocaleString(),icon:d.Z,change:"+12%",changeType:"positive"},{name:"Campaigns Sent",value:s.totalCampaigns.toLocaleString(),icon:m.Z,change:"+8%",changeType:"positive"},{name:"Emails Delivered",value:s.totalSent.toLocaleString(),icon:o.Z,change:"+23%",changeType:"positive"},{name:"Average Open Rate",value:`${s.openRate.toFixed(1)}%`,icon:x.Z,change:"+5.2%",changeType:"positive"}],f=[{name:"Import Contacts",description:"Import from Mailchimp or CSV",href:"/dashboard/contacts/import",icon:d.Z},{name:"Create Campaign",description:"Send emails to your audience",href:"/dashboard/campaigns/new",icon:m.Z},{name:"Browse Templates",description:"Ready-made email templates",href:"/dashboard/templates",icon:o.Z}];return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"md:flex md:items-center md:justify-between mb-8",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:["Welcome back, ",e?.user?.name?.split(" ")[0],"!"]}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Here's what's happening with your email marketing today."})]}),t.jsx("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:(0,t.jsxs)(g(),{href:"/dashboard/campaigns/new",className:"btn-primary inline-flex items-center",children:[t.jsx(h.Z,{className:"h-4 w-4 mr-2"}),"New Campaign"]})})]}),t.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:u.map(e=>{let s=e.icon;return t.jsx("div",{className:"stats-card",children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(s,{className:"h-6 w-6 text-gray-400"})}),t.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,t.jsxs)("dl",{children:[t.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:e.name}),(0,t.jsxs)("dd",{className:"flex items-baseline",children:[t.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:e.value}),(0,t.jsxs)("div",{className:"ml-2 flex items-baseline text-sm font-semibold text-green-600",children:[t.jsx(p,{className:"self-center flex-shrink-0 h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Increased by"}),e.change]})]})]})})]})},e.name)})}),(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg mb-8",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Quick Actions"})}),t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:f.map(e=>{let s=e.icon;return(0,t.jsxs)(g(),{href:e.href,className:"relative rounded-lg border border-gray-300 bg-white px-6 py-5 shadow-sm flex items-center space-x-3 hover:border-gray-400 hover:shadow-md transition-all duration-200",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(s,{className:"h-6 w-6 text-primary-600"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[t.jsx("span",{className:"absolute inset-0","aria-hidden":"true"}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.name}),t.jsx("p",{className:"text-sm text-gray-500 truncate",children:e.description})]})]},e.name)})})})]}),0===s.totalContacts&&t.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-6",children:(0,t.jsxs)("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(o.Z,{className:"h-6 w-6 text-primary-600"})}),(0,t.jsxs)("div",{className:"ml-3",children:[t.jsx("h3",{className:"text-sm font-medium text-primary-800",children:"Get started with LocalMailer"}),t.jsx("div",{className:"mt-2 text-sm text-primary-700",children:t.jsx("p",{children:"Welcome to LocalMailer! To get started, import your contacts and create your first campaign."})}),t.jsx("div",{className:"mt-4",children:(0,t.jsxs)("div",{className:"-mx-2 -my-1.5 flex",children:[t.jsx(g(),{href:"/dashboard/contacts/import",className:"bg-primary-50 px-2 py-1.5 rounded-md text-sm font-medium text-primary-800 hover:bg-primary-100",children:"Import Contacts"}),t.jsx(g(),{href:"/dashboard/templates",className:"ml-3 bg-primary-50 px-2 py-1.5 rounded-md text-sm font-medium text-primary-800 hover:bg-primary-100",children:"Browse Templates"})]})})]})]})})]})}function v(){let{data:e,status:s}=(0,i.useSession)();return"loading"===s?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):e?t.jsx(n.Z,{children:t.jsx(f,{})}):t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Not authenticated"})}let j=async e=>await (0,r.getServerSession)(e.req,e.res,l.L)?{props:{}}:{redirect:{destination:"/auth/signin",permanent:!1}}},6764:()=>{},3227:e=>{"use strict";e.exports=require("next-auth")},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},9752:e=>{"use strict";e.exports=import("@tanstack/react-query")},6201:e=>{"use strict";e.exports=import("react-hot-toast")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")},8347:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(8387).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}};var s=require("../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[388,571,119],()=>a(7399));module.exports=t})();